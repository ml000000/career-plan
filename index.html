<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é©¬ç£Š - èŒä¸šå‘å±•è§„åˆ’ (åŠ å¯†è®¿é—®)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    
    <style>
        /* ç®€å•çš„åŠ¨ç”» */
        .fade-in { animation: fadeIn 0.8s ease-in; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        /* å¯†ç é®ç½©å±‚ */
        #login-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(255, 255, 255, 0.98);
            z-index: 9999;
            display: flex; justify-content: center; align-items: center; flex-direction: column;
        }
        .blur-content { filter: blur(8px); pointer-events: none; user-select: none; }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 font-sans antialiased overflow-hidden">

    <div id="login-overlay">
        <div class="bg-white p-8 rounded-2xl shadow-xl border border-slate-200 text-center max-w-sm w-full mx-4">
            <div class="text-4xl mb-4">ğŸ”’</div>
            <h2 class="text-xl font-bold text-slate-800 mb-2">è®¿é—®å—é™</h2>
            <p class="text-slate-500 text-sm mb-6">è¯·è¾“å…¥ç®€å†è®¿é—®å¯†ç ä»¥æŸ¥çœ‹é©¬ç£Šçš„èŒä¸šè§„åˆ’çœ‹æ¿ã€‚</p>
            
            <input type="password" id="password-input" 
                   class="w-full p-3 border border-slate-300 rounded-lg mb-4 text-center focus:ring-2 focus:ring-blue-500 outline-none" 
                   placeholder="è¯·è¾“å…¥å¯†ç  (å¦‚: 2026)">
            
            <button onclick="checkPassword()" 
                    class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-lg transition duration-200">
                è§£é”ç®€å†
            </button>
            <p id="error-msg" class="text-red-500 text-xs mt-3 hidden">å¯†ç é”™è¯¯ï¼Œè¯·é‡è¯•ã€‚</p>
        </div>
    </div>

    <main id="main-content" class="max-w-5xl mx-auto px-4 py-8 blur-content transition-all duration-500">
        
        <div class="text-center mb-12 fade-in">
            <h1 class="text-3xl font-bold text-slate-900">é©¬ç£Š <span class="text-slate-400 text-lg font-normal">| Ma Lei</span></h1>
            <p class="text-slate-600 mt-2">ä¾›åº”é“¾è¿è¥ / æ•°æ®åˆ†ææ¢ç´¢è€… / Python åˆå­¦è€…</p>
            <div class="flex justify-center gap-4 mt-4 text-sm text-slate-500">
                <span>ğŸ“ æ±Ÿè‹è‹å·</span>
                <span>ğŸ“§ (è¯·é€šè¿‡é‚®ä»¶è”ç³»)</span>
                <span>ğŸ“ è‹å·ç»è´¸èŒä¸šæŠ€æœ¯å­¦é™¢</span>
            </div>
        </div>

        <div class="grid md:grid-cols-2 gap-8 mb-12 fade-in">
            <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-100">
                <h3 class="font-bold text-slate-800 mb-4 border-l-4 border-blue-500 pl-3">å¤åˆèƒ½åŠ›æ¨¡å‹</h3>
                <div class="relative h-64 w-full">
                    <canvas id="skillChart"></canvas>
                </div>
                <p class="text-xs text-slate-400 mt-4 text-center">æ•°æ®æ¥æºï¼šåŸºäºè¿‡å¾€å®ä¹ ä¸è‡ªå­¦é¡¹ç›®è¯„ä¼°</p>
            </div>

            <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-100 flex flex-col">
                <h3 class="font-bold text-slate-800 mb-2 border-l-4 border-indigo-500 pl-3">AI ç®€å†åˆ†æåŠ©æ‰‹</h3>
                <p class="text-sm text-slate-600 mb-4">
                    è¿™æ˜¯æˆ‘è°ƒç”¨ Gemini API å¼€å‘çš„ä¸€ä¸ªå°åŠŸèƒ½ã€‚ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®ï¼ŒAI å°†æ ¹æ®æˆ‘çš„ç®€å†ç”Ÿæˆä¸€ä»½é’ˆå¯¹<b>â€œWMSæ•°æ®ä¸“å‘˜â€</b>å²—ä½çš„æ¨èè¯­ã€‚
                </p>
                
                <div id="ai-response-box" class="flex-1 bg-slate-50 rounded-lg p-4 text-sm text-slate-700 overflow-y-auto mb-4 border border-slate-100 min-h-[150px]">
                    <span class="text-slate-400 italic">ç­‰å¾…æŒ‡ä»¤...</span>
                </div>

                <button id="ai-btn" onclick="callAI()" class="w-full bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-600 hover:to-purple-700 text-white py-3 rounded-lg font-medium shadow-md transition-all flex items-center justify-center gap-2">
                    <span>âœ¨</span> ç”Ÿæˆ AI æ¨èè¯­
                </button>
            </div>
        </div>

        <div class="bg-white p-8 rounded-2xl shadow-sm border border-slate-100 fade-in">
            <h3 class="font-bold text-xl text-slate-800 mb-6">å…³é”®ç»å†ä¸é¡¹ç›®</h3>
            <div class="space-y-8 border-l-2 border-slate-200 pl-6 ml-2">
                <div class="relative">
                    <span class="absolute -left-[31px] top-1 w-4 h-4 rounded-full bg-blue-500 ring-4 ring-white"></span>
                    <h4 class="font-bold text-slate-800">ä¸­å›½çŸ³æ²¹ (å®ä¹ +æ­£å¼) - åº“å­˜ç®¡ç†å‘˜</h4>
                    <span class="text-xs text-slate-500 block mb-2">2025.10 - è‡³ä»Š | è‹å·</span>
                    <p class="text-sm text-slate-600">
                        è´Ÿè´£ç‰©èµ„å°è´¦ä¸è¿›é”€å­˜æŠ¥è¡¨ã€‚é€šè¿‡ä¸¥æ ¼çš„ç›˜ç‚¹æµç¨‹ï¼Œå°†åº“å­˜å·®å¼‚ç‡æ§åˆ¶åœ¨ <strong class="text-blue-600">0.1% ä»¥ä¸‹</strong>ã€‚åœ¨èŒæœŸé—´è‡ªå­¦ Python å°è¯•ä¼˜åŒ–é‡å¤æ€§æ•°æ®å½•å…¥å·¥ä½œã€‚
                    </p>
                </div>
                <div class="relative">
                    <span class="absolute -left-[31px] top-1 w-4 h-4 rounded-full bg-indigo-500 ring-4 ring-white"></span>
                    <h4 class="font-bold text-slate-800">ä¸ªäººé¡¹ç›®ï¼šèŒä¸šæ•°æ®çœ‹æ¿ (æœ¬ç½‘é¡µ)</h4>
                    <span class="text-xs text-slate-500 block mb-2">2026.02 | ç‹¬ç«‹å¼€å‘</span>
                    <p class="text-sm text-slate-600">
                        ä½¿ç”¨ HTML5, Tailwind CSS å’Œ Chart.js æ„å»ºçš„å‰ç«¯é¡µé¢ã€‚é›†æˆäº† Gemini 2.0 API è¿›è¡Œå®æ—¶çš„æ–‡æœ¬ç”Ÿæˆæ¼”ç¤ºï¼Œå±•ç¤ºäº†æˆ‘åœ¨æ•°å­—åŒ–å·¥å…·åº”ç”¨ä¸Šçš„æ½œåŠ›ã€‚
                    </p>
                </div>
            </div>
        </div>

    </main>

    <script>
        // ================= é…ç½®åŒº =================
        
        // ã€é‡è¦ã€‘è¯·æŠŠä½ çš„ API Key æ‹†åˆ†å¼€å¡«åœ¨è¿™é‡Œ (é˜²æ­¢ GitHub æŠ¥è­¦)
        const key_part_1 = "AIzaSy";  // å‰ 6-10 ä½
        const key_part_2 = "Cz3fofn_UxTGxbf2UqUsfo-T2vpw3m5Gg"; // å‰©ä¸‹çš„éƒ¨åˆ†
        const API_KEY = key_part_1 + key_part_2;

        // è®¾ç½®ä½ çš„è®¿é—®å¯†ç 
        const PAGE_PASSWORD = "321"; 
        
        // ========================================

        // 1. é¡µé¢åŠ è½½å®Œæ¯•åï¼Œç«‹åˆ»æ£€æŸ¥æ˜¯å¦å·²ç»ç”¨è¿‡ AI
        document.addEventListener('DOMContentLoaded', function() {
            const hasUsed = localStorage.getItem('has_used_ai_resume');
            const btn = document.getElementById('ai-btn');
            
            if (hasUsed === 'true') {
                // å¦‚æœä»¥å‰ç”¨è¿‡ï¼Œç›´æ¥ç¦ç”¨æŒ‰é’®
                disableAIButton(btn);
            }
        });

        // è¾…åŠ©å‡½æ•°ï¼šç¦ç”¨æŒ‰é’®çš„æ ·å¼
        function disableAIButton(btn) {
            btn.disabled = true;
            btn.innerHTML = '<span>ğŸ”’</span> æœºä¼šå·²ç”¨å®Œ (é™ä¸€æ¬¡)';
            btn.className = "w-full bg-slate-400 text-white py-3 rounded-lg font-medium cursor-not-allowed flex items-center justify-center gap-2";
            // ç§»é™¤åŸæœ¬çš„ hover æ•ˆæœå’Œæ¸å˜è‰²
        }

        // 2. å¯†ç éªŒè¯é€»è¾‘
        function checkPassword() {
            const input = document.getElementById('password-input').value;
            const errorMsg = document.getElementById('error-msg');
            const overlay = document.getElementById('login-overlay');
            const mainContent = document.getElementById('main-content');
            const body = document.body;

            if (input === PAGE_PASSWORD) {
                overlay.style.opacity = '0';
                setTimeout(() => overlay.remove(), 500);
                mainContent.classList.remove('blur-content');
                body.classList.remove('overflow-hidden');
                setTimeout(initCharts, 300);
            } else {
                errorMsg.classList.remove('hidden');
                document.getElementById('password-input').classList.add('border-red-500');
            }
        }

        // 3. åˆå§‹åŒ–å›¾è¡¨
        function initCharts() {
            const ctx = document.getElementById('skillChart').getContext('2d');
            new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: ['WMSç³»ç»Ÿæ“ä½œ', 'Excelæ•°æ®å¤„ç†', 'PythonåŸºç¡€', 'ä¾›åº”é“¾é€»è¾‘', 'è‹±è¯­æ²Ÿé€š', 'å›¢é˜Ÿåä½œ'],
                    datasets: [{
                        label: 'èƒ½åŠ›å€¼',
                        data: [90, 85, 45, 75, 60, 80],
                        backgroundColor: 'rgba(59, 130, 246, 0.2)',
                        borderColor: 'rgba(59, 130, 246, 1)',
                        pointBackgroundColor: 'rgba(59, 130, 246, 1)',
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: { r: { suggestedMin: 0, suggestedMax: 100 } }
                }
            });
        }

        // 4. AI è°ƒç”¨é€»è¾‘ (åŠ å¼ºç‰ˆ)
        async function callAI() {
            const btn = document.getElementById('ai-btn');
            const box = document.getElementById('ai-response-box');

            // --- åŒé‡æ£€æŸ¥ï¼šé˜²æ­¢æ‰‹å¿«è¿ç‚¹ ---
            if (localStorage.getItem('has_used_ai_resume') === 'true') {
                alert("æ¯ä½è®¿å®¢ä»…é™ç”Ÿæˆä¸€æ¬¡ï¼Œè¯·å‹¿é‡å¤æ“ä½œã€‚");
                disableAIButton(btn);
                return;
            }

            if (!API_KEY || API_KEY.includes("å‰©ä¸‹çš„éƒ¨åˆ†")) {
                box.innerHTML = "<span class='text-red-500'>âš ï¸ API Key æœªé…ç½®æ­£ç¡®ï¼Œè¯·æ£€æŸ¥ä»£ç ã€‚</span>";
                return;
            }

            // é”å®šæŒ‰é’®çŠ¶æ€ï¼Œé˜²æ­¢é‡å¤ç‚¹å‡»
            btn.disabled = true;
            btn.innerHTML = '<span class="animate-spin">ğŸ”„</span> æ­£åœ¨åˆ†ææ•°æ®...';
            box.innerHTML = "<span class='text-slate-400'>æ­£åœ¨è¿æ¥ Gemini æ¨¡å‹...</span>";

            const prompt = "è¯·ä½ æ‰®æ¼”ä¸€ä½èµ„æ·±çŒå¤´ã€‚é’ˆå¯¹æ±‚èŒè€…é©¬ç£Šï¼ˆåº”å±Šç”Ÿï¼Œæœ‰çŸ³æ²¹å…¬å¸åº“å­˜ç®¡ç†ç»éªŒï¼Œåº“å­˜å·®å¼‚ç‡<0.1%ï¼Œè‡ªå­¦Pythonå’ŒWebå¼€å‘ï¼‰ï¼Œä¸ºä»–ç”³è¯·â€œWMSæ•°æ®ä¸“å‘˜â€å†™ä¸€æ®µç®€çŸ­ã€æœ‰åŠ›ã€ä¸“ä¸šçš„æ¨èè¯­ï¼ˆ100å­—ä»¥å†…ï¼‰ã€‚";

            try {
                const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${API_KEY}`;
                const response = await fetch(url, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }] })
                });

                const data = await response.json();
                
                if (data.error) {
                    throw new Error(data.error.message);
                }

                const text = data.candidates[0].content.parts[0].text;
                box.innerHTML = marked.parse(text); 

                // --- å…³é”®ï¼šæˆåŠŸåç«‹åˆ»è®°å½•å¹¶æ°¸ä¹…ç¦ç”¨ ---
                localStorage.setItem('has_used_ai_resume', 'true');
                disableAIButton(btn); // è°ƒç”¨ç¦ç”¨å‡½æ•°
                btn.innerHTML = '<span>âœ…</span> åˆ†æå·²å®Œæˆ';

            } catch (error) {
                console.error(error);
                box.innerHTML = `<span class='text-red-500'>è¯·æ±‚å¤±è´¥: ${error.message}</span>`;
                // å¦‚æœå¤±è´¥äº†ï¼Œå…è®¸é‡è¯•ï¼Œæ‰€ä»¥è¿™é‡Œä¸å†™å…¥ localStorageï¼Œä¹Ÿä¸æ°¸ä¹…ç¦ç”¨
                btn.disabled = false;
                btn.innerHTML = '<span>âœ¨</span> é‡è¯•ç”Ÿæˆ';
                btn.classList.remove('cursor-not-allowed');
            }
        }
        
        document.getElementById('password-input').addEventListener('keypress', function (e) {
            if (e.key === 'Enter') checkPassword();
        });
    </script>
</body>
</html>